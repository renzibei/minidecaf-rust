# Step 12

## 实验内容

Step12实现了数组，但是数组的实现还是和C有区别的，不能有指向数组的指针。

没有将数组放到`Type`类型中，而是对于每个变量和表达式，用一个`Type`和一个整数数组（表示数组的维度）来表达类型。

由于不允许隐式类型转换，因此类型检查时，许多语句不允许类型为数组，例如指针算术的参与者只能是指针而不能是数组。

在IR生成时，对数组的访问都转换为对一维数组的访问。

## 思考题

### 1. 

```c
A(): *(int*)(4096 + 23 * 4)
  
B(): *(int*)(4096 + 23 * 4)
  
C(): *(int*)(4096 + (2 * 10 + 3) * 4)
  
D(): *(int*)(4096 + 2 * 4 + 3 * 4)
  
E(): *(int*)(*(int**)(4096 + 2 * 4) + 3 * 4)
```

### 2.

实现VLA相当于要求实现c的`alloca`功能，运行时将使用在栈上分配的内存储存数组，例如需要声明`int a[n];`时，将栈顶减`4 * n`，变量a储存声明后的栈顶地址，在当前scope结束后需要将栈顶再加`4 * n`。

