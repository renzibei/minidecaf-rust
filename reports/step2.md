# Step2 Report

## 实验内容

本次实验的内容是给整数常量添加三个一元运算符取负 `-`、按位取反 `~` 以及逻辑非 `!`

一开始的实现是仿照[Mashplant的参考实现](https://github.com/decaf-lang/minidecaf/tree/mashplant)，对AST的修改很少，主要依托于Expression的AST实现功能。

在后来的视线中完全按照实验指导书中的规范，向AST节点中添加了`Unary`来表示这三种运算。



## 思考题

**题目：**我们在语义规范中规定整数运算越界是未定义行为，运算越界可以简单理解成理论上的运算结果没有办法保存在32位整数的空间中，必须截断高于32位的内容。请设计一个表达式，只使用`-~!`这三个单目运算符和 $[0, 2^{31} - 1]$ 范围内的非负整数，使得运算过程中发生越界。



```c
int a = 2147483647；
int b = ~a; // b = 0xb0000000
int c = -b; // c = 0xb0000000
```

上面的代码中`c = -b`这一步运算发生了整数的运算越界，b是$- 2^{31}$，则-b超出了int代表的整数范围。

